# 📚 FLOW ASSIGNMENT

### 📃 요구사항
- [X] 고정 확장자 리스트 출력
- [X] 고정 확장자를 check or uncheck 및 db 저장
- [X] 새로고침시 유지 ( 커스텀 확장자와는 색상으로 구분 하였음 )
- [X] 확장자 최대 입력 길이 제한
- [X] 추가버튼 클릭시 db 저장 및 표현
- [X] 커스텀 확장자 최대 갯수 제한
- [X] 확장자 옆 X를 클릭시 db에서 삭제

### 😁 추가 개발사항
- [X] 메인화면
- [X] 로그인, 로그아웃
- [X] 회원가입
- [X] 업로드 페이지
- [X] 환경설정 페이지 ( 포멧 제한 커스터마이징 페이지 )
- [X] 상태 값 유지

### 🔥 개발하려했지만 접은 내용
- CSV 파일 업로드를 이용해 파일 포멧 한번에 등록
- 대표적인 제한 포맷 템플릿화
- SQL INJECTION 방지
- 서버 측 커스텀 포멧 값 검증

### 🛠 구조
- BE : Nodejs 
- DB : AWS RDS ( PostgreSQL )
- FE : Reactjs
- Deploy : Docker, AWS

### 🤔 고려사항

+ 기술 선택
  * BE 는 자신 있는 Nodejs - Expressjs 를 사용하였습니다.
  * DB 는 MongoDB를 사용하려다 수정이 많은 작업일 것 같아서 RDB를 사용하는게 적합하다 생각하였고 Mysql Postgresql 중 하나를 택해야했는데 해당 작업에서 큰 차이가 없을것으로 판단되어 구직공고에 Postgresql 이 먼저 써있길래 Postgresql을 사용하였습니다.
  * FE 는 포멧의 check uncheck를 실시간으로 새로고침 없이 반영하기 위해서 Reactjs를 사용하였습니다.
  * Deploy 에서 Docker는 민감한 파일인 dotenv파일을 ec2에 보관하고 싶지않아서 docker를 사용하였습니다.
  * Deploy 에서 AWS는 프리티어 기간이 남아서 사용하였습니다.

+ 클라이언트 조건부 렌더링
  * 파일 제한의 경우에는 관리자가 사용할 것이라고 생각하여 조건부 렌더링을 통해 관리자 이외의 접근을 제한하였습니다.
  * 이를 위해서 DB 구성 시 users 테이블을 추가로 작성하였고, role 컬럼을 통해서 관리자와의 구분을 지었습니다.

+ 커스텀 확장자 체크
  * 커스텀 확장자 중복을 체크하였습니다.
  * 커스텀 확장자의 갯수를 제한 할 때 추가적인 쿼리를 사용하여 DB 내에 있는 포멧의 갯수를 세는 것이 아닌 처음 포멧의 리스트를 가져올 때 갯수를 세고 갯수가 초과된다면 요청 자체를 못보내도록 하였습니다. 이렇게하면 클라이언트를 위변조하여 200개를 초과하여 등록 할 수 있다고 생각은 했지만 애초에 관리자만 접근 가능하도록 한 페이지이고 관리자만의 기능이기에 악의적인 행동을 할 이유가 없다고 판단하여 서버측에서 포멧의 갯수를 파악하지않고 클라이언트 측에서 판단하였습니다.
  * 커스텀 확장자의 X 만 정확하게 누르기엔 불편해서 버튼 자체를 누를 시 삭제되도록 하였습니다.

+ 파일 크기 제한
  * 파일 크기를 제한하지 않으면 제 AWS 요금이 폭발 할 수 있다는 걱정에 제한했습니다.

+ 엔터 값을 통한 추가
  * 커스텀 포멧을 추가할 때 마우스 클릭과 엔터키를 통한 추가를 더했습니다. ( 편리성 )

+ 포멧 카운팅
  * 포멧 제한에 걸리는 빈도를 파악하여 제한을 해제 or 유지 하기 위해 작성하였습니다.
    ( 초기에는 모든 업로드 파일을 카운팅하여 많이 업로드 된 파일을 파악하고 횟수가 많은 파일을 제한하는 기능을 추가할까? 라는 생각을 했지만 너무 제가 만들고 싶은대로만 만드는것같아서 재고하였습니다. )
  * formats 테이블의 name 과 format_counts 테이블의 format_name (FK) 를 1:1 로 관계지었습니다.

+ 제한 포멧 템플릿
  * 파일 제한할만한 포멧이 대표적으로 무엇이 있나 찾아봤습니다. 아래와 같은 사이트에서 리스트를 제공하는데 이 리스트를 템플릿처럼 선택할 수 있도록 할 까? csv파일을 업로드하면 csv의 데이터를 파싱해서 파일 포멧을 지정할까? 했었는데 시간이 부족할 거라 생각하여 재고하였습니다.
  * https://ko.savtec.org/articles/howto/50-file-extensions-that-are-potentially-dangerous-on-windows.html

+ 업로드 페이지
  * 업로드 페이지가 처음 렌더링 되기 전 포멧 제한 리스트를 받아오고 이 리스트에 있는 파일을 업로드 시 바로바로 제한 여부에 대한 내용을 명시하였습니다.
